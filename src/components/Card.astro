---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'a'> {
  title: string;
  imglink: string;
  content: string;
  technologies: string[];
  href: string; 
  theme?: "sunset" | "cosmic";
  span?: number;
}

const {
  title,
  imglink,
  content,
  technologies,
  href, 
  theme = "sunset",
  span = 1,
  class: className,
  ...rest
} = Astro.props;

const drawerBg = theme === "sunset"
  ? "bg-gradient-to-br from-orange-600 to-red-950" 
  : "bg-gradient-to-br from-purple-700 to-pink-900"; 

const tagBg = theme === "sunset"
  ? "bg-gradient-to-br from-orange-600 to-red-950" 
  : "bg-gradient-to-br from-purple-700 to-pink-900"; 
// Lógica de margen horizontal dinámico según el ancho (span)
const horizontalPadding = span === 4 
  ? "px-16 md:px-32 lg:px-52" // Padding extra grande para el Hero
  : span === 3 
    ? "px-12 md:px-24 lg:px-40" 
    : span === 2 
      ? "px-8 md:px-16 lg:px-24" 
      : "px-6";
---

<a 
  href={href} 
  {...rest} 
  class={`
    block group relative bg-gray-900 text-white shadow-xl
    border-3 border-white/20 hover:border-white/60 
    rounded-lg overflow-hidden no-underline cursor-pointer 
    transition duration-500 ease-in-out
    min-h-[250px] h-full w-full
    ${className ?? ''}
  `}
>
    <article class="relative h-full w-full flex flex-col">
        {/* Imagen de fondo */}
        <div class="absolute inset-0 z-0">
            <img 
              src={imglink} 
              alt={title} 
              loading="lazy"
              class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-110"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/95 via-black/40 to-transparent transition-opacity duration-300 group-hover:opacity-0"></div>
        </div>

        {/* Título y Etiquetas visibles inicialmente */}
        <div class="absolute bottom-0 left-0 p-6 z-10 transition-all duration-300 group-hover:translate-y-10 group-hover:opacity-0">
            <h6 class="text-2xl font-bold leading-tight drop-shadow-lg mb-3">
                {title}
            </h6>
            <div class="flex flex-wrap gap-2">
                {technologies.map((tech) => (
                    <span class={`text-[10px] font-bold px-2 py-1 rounded-md ${tagBg}`}>
                        {tech}
                    </span>
                ))}
            </div>
        </div>

        {/* Cajón de información (Hover) */}
        <div 
          class={`
            absolute inset-0 z-20 flex items-center justify-center
            transform translate-y-full group-hover:translate-y-0
            transition-transform duration-500 ease-out
            ${drawerBg} ${horizontalPadding}
          `}
        >
            <p class="text-xs sm:text-md leading-relaxed text-white font-medium text-center">
                {content} 
            </p>
        </div>
    </article>
</a>